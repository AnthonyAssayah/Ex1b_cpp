#include "doctest.h"
#include "mat.hpp"
using namespace ariel;

#include <string>
#include <algorithm>
using namespace std;

/**
 * Returns the input string without the whitespace characters: space, newline and tab.
 * Requires std=c++2a.
 */
string nospaces(string input) {
	std::erase(input, ' ');
	std::erase(input, '\t');
	std::erase(input, '\n');
	std::erase(input, '\r');
	return input;
}


TEST_CASE("Good input") {
	CHECK(nospaces(mat(9, 7, '@', '-')) == nospaces("@@@@@@@@@\n"
													"@-------@\n"
													"@-@@@@@-@\n"
													"@-@---@-@\n"
													"@-@@@@@-@\n"
													"@-------@\n"
													"@@@@@@@@@"));
	/* Add more test here */
}

TEST_CASE("Bad input") {
    CHECK_THROWS(mat(10, 5, '$', '%'));
    /* Add more test here */
}

TEST_CASE("Good input") {
    CHECK(nospaces(mat(15, 7, '#', '~')) == nospaces("###############\n"
                                                     "#~~~~~~~~~~~~~#\n"
                                                     "#~###########~#\n"
                                                     "#~#~~~~~~~~~#~#\n"
                                                     "#~###########~#\n"
                                                     "#~~~~~~~~~~~~~#\n"
                                                     "###############"));
}


TEST_CASE("Good input") {
    CHECK(nospaces(mat(9, 7, '@', '-')) == nospaces("@@@@@@@@@\n"
													"@-------@\n"
													"@-@@@@@-@\n"
													"@-@---@-@\n"
													"@-@@@@@-@\n"
													"@-------@\n"
													"@@@@@@@@@\n"));
}

TEST_CASE("Good input") {
    CHECK(nospaces(mat(3, 7, '$', '+')) == nospaces("$$$\n"
													"$+$\n"
													"$+$\n"
													"$+$\n"
													"$+$\n"
													"$+$\n"
													"$$$n"));
}

TEST_CASE("Good input") {
    CHECK(nospaces(mat(1, 1, '=', ':')) == nospaces("=\n"));
}

TEST_CASE("Bad input") {
    CHECK_THROWS(mat(0, 0, '$', '%'));

}
TEST_CASE("Good input") {
    CHECK(nospaces(mat(49, 1, '*', '+')) == nospaces("*************************************************\n"));

}


TEST_CASE("Good input") {
    CHECK(nospaces(mat(25, 25, '&', '!')) == nospaces("&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"));
}



TEST_CASE("Good input") {
    CHECK(nospaces(mat(17, 37, '?', '^')) == nospaces("?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"));
                                                      
}


TEST_CASE("Good input") {
    CHECK(nospaces(mat(2, 2, '~', '=')) == nospaces("~~\n"
												    "~~\n"));
}

TEST_CASE("Good input") {
    CHECK(nospaces(mat(5, 5, '=', '/')) == nospaces("=====\n"
												    "=====\n"
													"=====\n"
													"=====\n"
													"=====\n"));
}
TEST_CASE("Good input") {
    CHECK(nospaces(mat(3, 7, '$', '+')) == nospaces("$$$\n"
													"$+$\n"
													"$+$\n"
													"$+$\n"
													"$+$\n"
													"$+$\n"
													"$$$n"));
}

TEST_CASE("Good input") {
    CHECK(nospaces(mat(1, 1, '=', ':')) == nospaces("=\n"));
}

TEST_CASE("Bad input") {
    CHECK_THROWS(mat(0, 0, '$', '%'));

}
TEST_CASE("Good input") {
    CHECK(nospaces(mat(49, 1, '*', '+')) == nospaces("*************************************************\n"));

}


TEST_CASE("Good input") {
    CHECK(nospaces(mat(25, 25, '&', '!')) == nospaces("&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&\n"));
}



TEST_CASE("Good input") {
    CHECK(nospaces(mat(17, 37, '?', '^')) == nospaces("?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
													  "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"
                                                      "?????????????????????????????????????\n"));
                                                      
}


TEST_CASE("Good input") {
    CHECK(nospaces(mat(2, 2, '~', '=')) == nospaces("~~\n"
												    "~~\n"));
}

TEST_CASE("Good input") {
    CHECK(nospaces(mat(5, 5, '=', '/')) == nospaces("=====\n"
												    "=====\n"
													"=====\n"
													"=====\n"
													"=====\n"));
}